<!-- Code is generated by github.com/swaggest/swac <version>, DO NOT EDIT. ðŸ¤– -->

# PHPerf XHPROF Aggregator

Version: cli-mode

[Schema](./openapi.json).

## Table Of Contents

* [Operations](#operations)
    * ### Analyze
      - [GET `/profile`](#listprofiles) List Profiles
      - [GET `/profile.dot`](#getprofiledot) Dot Graph
      - [GET `/profile/find-symbol`](#getprofilefindsymbol) Find Symbol
      - [GET `/profile/symbol`](#getprofilesymbol) Symbol Stat
      - [GET `/top-traces`](#gettoptraces) Top Traces

    * ### Collect
      - [POST `/profile`](#postprofile) Collect Profile
      - [POST `/upload/profile`](#postuploadprofile) Upload Profile
      - [POST `/upload/profiles`](#postuploadprofiles) Upload Profiles

* [Types](#types)

## <a id="operations"></a> Operations

### <a id="listprofiles"></a> GET `/profile`

List Profiles

#### Response

|Status|Content Type      |Body Type                  |Description|
|------|------------------|---------------------------|-----------|
|200   |`application/json`|[`XhProfiles`](#xhprofiles)|OK         |
### <a id="postprofile"></a> POST `/profile`

Collect Profile

Collects XHPROF-compatible PHP profile.

#### Parameters

|Name  |In  |Type                                             |
|------|----|-------------------------------------------------|
|`body`|body|[`XhCollectProfileInput`](#xhcollectprofileinput)|

#### Response

|Status|Content Type      |Body Type                                |Description|
|------|------------------|-----------------------------------------|-----------|
|202   |                  |                                         |Accepted   |
|409   |`application/json`|[`XhRestErrResponse`](#xhresterrresponse)|Conflict   |
### <a id="getprofiledot"></a> GET `/profile.dot`

Dot Graph

#### Parameters

|Name           |In   |Type                                     |Description                                                                |Examples                 |
|---------------|-----|-----------------------------------------|---------------------------------------------------------------------------|-------------------------|
|`rootSymbol`   |query|`String`                                 |                                                                           |`MyNamespace\MyClass::do`|
|`graphLimit`   |query|`Number`                                 |Maximum number of nodes (symbols) in graph.                                |                         |
|`graphPriority`|query|`'wt'`, <br>`'cpu'`, <br>`'io'`          |Graph resource determines nodes selection to expose strongest contributors.|                         |
|`aggregate`    |query|[`XhAggregatorGroup`](#xhaggregatorgroup)|                                                                           |                         |

#### Response

|Status|Content Type       |Body Type                                |Description|
|------|-------------------|-----------------------------------------|-----------|
|200   |`text/vnd.graphviz`|                                         |OK         |
|404   |`application/json` |[`XhRestErrResponse`](#xhresterrresponse)|Not Found  |
### <a id="getprofilefindsymbol"></a> GET `/profile/find-symbol`

Find Symbol

#### Parameters

|Name       |In   |Type                                     |Description                  |
|-----------|-----|-----------------------------------------|-----------------------------|
|`aggregate`|query|[`XhAggregatorGroup`](#xhaggregatorgroup)|                             |
|`match`    |query|`String`                                 |Substring to match in symbol.|
|`limit`    |query|`Number`                                 |Limit number of results.     |

#### Response

|Status|Content Type      |Body Type                                |Description|
|------|------------------|-----------------------------------------|-----------|
|200   |`application/json`|[`XhSearchOutput`](#xhsearchoutput)      |OK         |
|404   |`application/json`|[`XhRestErrResponse`](#xhresterrresponse)|Not Found  |
### <a id="getprofilesymbol"></a> GET `/profile/symbol`

Symbol Stat

#### Parameters

|Name       |In   |Type                                     |Examples                 |
|-----------|-----|-----------------------------------------|-------------------------|
|`aggregate`|query|[`XhAggregatorGroup`](#xhaggregatorgroup)|                         |
|`symbol`   |query|`String`                                 |`MyNamespace\MyClass::do`|

#### Response

|Status|Content Type      |Body Type                                  |Description|
|------|------------------|-------------------------------------------|-----------|
|200   |`application/json`|[`XhSymbolStatOutput`](#xhsymbolstatoutput)|OK         |
|404   |`application/json`|[`XhRestErrResponse`](#xhresterrresponse)  |Not Found  |
### <a id="gettoptraces"></a> GET `/top-traces`

Top Traces

Get traces that occupy most of resource.

#### Parameters

|Name        |In   |Type                                     |Description                                                                |Examples                 |
|------------|-----|-----------------------------------------|---------------------------------------------------------------------------|-------------------------|
|`rootSymbol`|query|`String`                                 |                                                                           |`MyNamespace\MyClass::do`|
|`aggregate` |query|[`XhAggregatorGroup`](#xhaggregatorgroup)|                                                                           |                         |
|`resource`  |query|`'wt'`, <br>`'cpu'`, <br>`'io'`          |Graph resource determines nodes selection to expose strongest contributors.|                         |
|`limit`     |query|`Number`                                 |                                                                           |                         |

#### Response

|Status|Content Type      |Body Type                                |Description|
|------|------------------|-----------------------------------------|-----------|
|200   |`application/json`|`Array<`[`XhTraceInfo`](#xhtraceinfo)`>` |OK         |
|404   |`application/json`|[`XhRestErrResponse`](#xhresterrresponse)|Not Found  |
### <a id="postuploadprofile"></a> POST `/upload/profile`

Upload Profile

Collects XHPROF-compatible PHP profile from uploaded JSON/PHP-Serialized file.

#### Parameters

|Name     |In      |Type                              |
|---------|--------|----------------------------------|
|`profile`|formData|`null`, `String`, Format: `binary`|
|`sample` |formData|`Number`                          |

#### Response

|Status|Content Type      |Body Type                                |Description|
|------|------------------|-----------------------------------------|-----------|
|202   |                  |                                         |Accepted   |
|409   |`application/json`|[`XhRestErrResponse`](#xhresterrresponse)|Conflict   |
### <a id="postuploadprofiles"></a> POST `/upload/profiles`

Upload Profiles

Collects XHPROF-compatible PHP profiles from uploaded JSON/PHP-Serialized files.

#### Parameters

|Name      |In      |Type                                             |Description                  |
|----------|--------|-------------------------------------------------|-----------------------------|
|`profiles`|formData|`Array<null`, `String`, Format: `binary>`, `null`|Files with profile JSON data.|

#### Response

|Status|Content Type      |Body Type                                |Description|
|------|------------------|-----------------------------------------|-----------|
|202   |                  |                                         |Accepted   |
|409   |`application/json`|[`XhRestErrResponse`](#xhresterrresponse)|Conflict   |

## <a id="types"></a> Types

### <a id="xhaggregatorgroup"></a> XhAggregatorGroup

|Property|Type                        |Description                       |
|--------|----------------------------|----------------------------------|
|`end`   |`Number`                    |Interval end UTC unix timestamp.  |
|`id`    |`String`                    |Profile ID.                       |
|`labels`|`Map<String,String>`, `null`|                                  |
|`start` |`Number`                    |Interval start UTC unix timestamp.|

### <a id="xhprofileinfo"></a> XhProfileInfo

|Property  |Type                                     |
|----------|-----------------------------------------|
|`addr`    |[`XhAggregatorGroup`](#xhaggregatorgroup)|
|`cpu`     |`String`                                 |
|`edges`   |`Number`                                 |
|`io`      |`String`                                 |
|`peakMem` |`String`                                 |
|`profiles`|`Number`                                 |
|`wt`      |`String`                                 |

### <a id="xhprofiles"></a> XhProfiles

|Property          |Type                                                |
|------------------|----------------------------------------------------|
|`activeAggregates`|`Array<`[`XhProfileInfo`](#xhprofileinfo)`>`, `null`|
|`recent`          |`Array<`[`XhProfileInfo`](#xhprofileinfo)`>`, `null`|

### <a id="xhprofilevalue"></a> XhProfileValue

|Property|Type    |Description                                               |
|--------|--------|----------------------------------------------------------|
|`as`    |`Number`|Aggregation size, count of parent profiles.               |
|`cpu`   |`Number`|CPU time in microseconds.                                 |
|`ct`    |`Number`|Count of calls.                                           |
|`io`    |`Number`|IO time in microseconds.                                  |
|`mem.aa`|`Number`|The amount of allocated memory.                           |
|`mem.na`|`Number`|The sum of the number of all allocations in this function.|
|`mem.nf`|`Number`|The sum of the number of all frees in this function.      |
|`mu`    |`Number`|Memory usage in bytes.                                    |
|`pmu`   |`Number`|Peak memory usage in bytes.                               |
|`wt`    |`Number`|Wall time in microseconds.                                |

### <a id="xhcollectprofileinput"></a> XhCollectProfileInput

|Property       |Type                                                       |Description                                         |
|---------------|-----------------------------------------------------------|----------------------------------------------------|
|`id` (required)|`String`                                                   |Random string created by client to identify profile.|
|`labels`       |`Map<String,String>`, `null`                               |                                                    |
|`meta`         |`Map<String,*>`, `null`                                    |Additional context.                                 |
|`profile`      |`Map<String,`[`XhProfileValue`](#xhprofilevalue)`>`, `null`|                                                    |

### <a id="xhresterrresponse"></a> XhRestErrResponse

|Property |Type           |Description                     |
|---------|---------------|--------------------------------|
|`code`   |`Number`       |Application-specific error code.|
|`context`|`Map<String,*>`|Application context.            |
|`error`  |`String`       |Error message.                  |
|`status` |`String`       |Status text.                    |

### <a id="xhsearchoutput"></a> XhSearchOutput

|Property |Type                   |
|---------|-----------------------|
|`symbols`|`Array<String>`, `null`|

### <a id="xhrendervaluestat"></a> XhRenderValueStat

|Property|Type    |
|--------|--------|
|`as`    |`String`|
|`cpu`   |`String`|
|`cpuf`  |`String`|
|`ct`    |`String`|
|`ctf`   |`String`|
|`io`    |`String`|
|`iof`   |`String`|
|`ma`    |`String`|
|`mac`   |`String`|
|`mf`    |`String`|
|`mu`    |`String`|
|`pmu`   |`String`|
|`wt`    |`String`|
|`wtf`   |`String`|

### <a id="xhsymbolstatoutput"></a> XhSymbolStatOutput

|Property   |Type                                                     |Description  |
|-----------|---------------------------------------------------------|-------------|
|`callees`  |`Map<String,`[`XhRenderValueStat`](#xhrendervaluestat)`>`|Callees stat.|
|`callers`  |`Map<String,`[`XhRenderValueStat`](#xhrendervaluestat)`>`|Callers stat.|
|`exclusive`|[`XhRenderValueStat`](#xhrendervaluestat)                |             |
|`inclusive`|[`XhRenderValueStat`](#xhrendervaluestat)                |             |

### <a id="xhtraceinfo"></a> XhTraceInfo

|Property|Type                                     |
|--------|-----------------------------------------|
|`hash`  |`String`                                 |
|`stat`  |[`XhRenderValueStat`](#xhrendervaluestat)|
|`symbol`|`String`                                 |
|`trace` |`Array<String>`, `null`                  |
